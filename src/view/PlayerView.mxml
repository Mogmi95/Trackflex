<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009"
		 xmlns:s="library://ns.adobe.com/flex/spark"
		 xmlns:mx="library://ns.adobe.com/flex/mx"
		 height="70"
		 creationComplete="creationCompleteHandler(event)">
	
	<fx:Declarations>
		<fx:Boolean id="draggingTrackSlide">false</fx:Boolean>
		<fx:Boolean id="playing">false</fx:Boolean>
	</fx:Declarations>
	
	<fx:Script>
		<![CDATA[
			import controller.PlayerController;
			
			import mx.events.FlexEvent;
			
			[Embed(source="assets/icons/player_play.png")]
			[Bindable]
			public static var ASSET_PLAY : Class;

			[Embed(source="assets/icons/player_pause.png")]
			[Bindable]
			public static var ASSET_PAUSE : Class;
			
			protected function play_clickHandler(event : MouseEvent) : void
			{
				if (PlayerController.currentTrack == null)
					return;
				
				PlayerController.play();
				playing = !playing;
			}
			
			protected function volumeslide_changeHandler(event : Event) : void
			{
				PlayerController.setVolume(volumeslide.value / 100);
			}
			
			protected function trackslide_changeHandler(event : Event) : void
			{
				if (PlayerController.currentTrack != null)
				{
					PlayerController.pausePoint = trackslide.value * PlayerController.currentTrack.length;
					PlayerController.refreshTime();
				}
			}
			
			protected function creationCompleteHandler(event : FlexEvent) : void
			{
				trackslide.thumb.addEventListener(MouseEvent.MOUSE_DOWN, onThumbMouseDownHandler);
				trackslide.showDataTip = false;
				volumeslide.dataTipPrecision = 0;
				
			}
			
			protected function onThumbMouseDownHandler(event : MouseEvent) : void
			{
				draggingTrackSlide = true;
				removeEventListener(Event.ENTER_FRAME, PlayerController.onProgressHandler);
			}
			
			public function onThumbMouseUpHandler(event : MouseEvent) : void
			{
				PlayerController.changeSoundPosition();
				draggingTrackSlide = false;
				if (playing)
					addEventListener(Event.ENTER_FRAME, PlayerController.onProgressHandler);
			}
			
			protected function stop_clickHandler(event : MouseEvent) : void
			{
				PlayerController.stop();
				playing = false;
			}
			
			protected function prev_clickHandler(event : MouseEvent) : void
			{
				PlayerController.previous();
			}
			
			protected function next_clickHandler(event : MouseEvent) : void
			{
				PlayerController.next();
			}
			
		]]>
	</fx:Script>
	
	
	<fx:Declarations>
		<!-- Placer ici les Ã©lÃ©ments non visuels (services et objets de valeur, par exemple). -->
	</fx:Declarations>
	
	<s:BorderContainer x="0" y="0" width="100%" height="100%" backgroundColor="0x333333"
					   borderColor="0x000000">
		<mx:Button id="prev" left="10" width="35" height="35" cornerRadius="90"
				  icon="@Embed('assets/icons/player_start.png')" verticalCenter="0"
				  click="prev_clickHandler(event)"/>
		<mx:Button id="play" left="55" width="50" height="50" click="play_clickHandler(event)"
				  cornerRadius="90" icon="{ASSET_PLAY}"
				  verticalCenter="0"/>
		<mx:Button id="stop" left="115" width="35" height="35" click="stop_clickHandler(event)"
				  cornerRadius="90" icon="@Embed('assets/icons/player_stop.png')"
				  verticalCenter="0"/>
		<mx:Button id="next" left="160" width="35" height="35" cornerRadius="90"
				  icon="@Embed('assets/icons/player_end.png')" verticalCenter="0"
				  click="next_clickHandler(event)"/>
		
		<s:HSlider id="trackslide" left="300" width="70%" maximum="1" minimum="0" stepSize="0.001"
				   verticalCenter="16" change="trackslide_changeHandler(event)"/>
		
		<s:HSlider id="volumeslide" right="10" width="70" change="volumeslide_changeHandler(event)"
				   maximum="100" minimum="0" value="100" verticalCenter="0"/>
		<s:Image id="volumeicon" right="74" width="56" height="28"
				 source="@Embed('assets/volume-icone.png')" verticalCenter="-3"/>
		<s:Label id="time" left="205" width="87" height="25" fontFamily="Verdana" fontSize="14"
				 text="0:00/0:00" textAlign="center" verticalAlign="middle" verticalCenter="0"/>
		<s:Label id="trackInfo" left="300" width="100%" height="15" fontFamily="Verdana" fontSize="14"
				 verticalCenter="-16"/>
	</s:BorderContainer>
</s:Group>
